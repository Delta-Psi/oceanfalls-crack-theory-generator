<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>oceanfalls crack theory generator</title>

        <style>
            @font-face {
                font-family: "press start";
                src: url(PrStart.ttf);
            }

            body {
                background-color: #172f48;
                color: #fdef7b;
                font-family: "press start";

                text-align: center;
            }

            #spacer {
                margin-bottom: 10%;
            }

            #theory {
                background-color: #000;
                border-style: solid;
                border-width: 6px;
                border-color: #374e76;
                padding: 12px 12px 12px 12px;
                margin-left: auto;
                margin-right: auto;
                width: 60%;
                float: center;
            }

            #footer {
                color: #eee;
                margin-top: 5%;
            }
        </style>

        <script src="seedrandom.js"></script>
        <script>
            var theories = [
                "[c] will kill [c] in cold blood.",
                "[c] will travel back in time and become [c].",
                "[c] is actually just [c] in disguise.",
                "[c] is [c]'s child.",
                "[c] and [c]'s final showdown will take place in [l].",
                "the secret to defeating [c] lies in [i].",
                "[c]'s arc is a metaphor for the Obama presidency.",
                "[c] is the real mastermind behind the war.",
                "[c]'s endgame ship is with [c].",
                "[c] and [c] will team up to defeat [c] once and for all.",
                "[c] will finally snap because of [i].",
                "the dome barrier is held together by [i].",
                "[c] will join the maids at Reds' Inn.",
                "[c] will attempt to eat [i] and choke.",
                "[c]'s special ability is triggered by [i].",
                "[c] will draw their last breath at [l].",
                "[c] and [c] have already met at [l], long ago.",
                "[c] will sit on [c]'s face.",
                "[c] and [c] will have a showdown at [l] over [i].",
                "[c] and [c] will hold hands.",
                "[c], [c] and [c] will be permakilled on the next EoA.",
                "[c] is actually [c] and [c] in a trenchcoat.",
                "the endgame party will be comprised of [c], [c], [c] and [c].",
                "[c] and [c] will fuse and form [c].",
                "[c] will throw [i] into Redtulip Town's well for a wish.",
                "[c] will be brought back from death by [c].",
                "Kotori will make [i] illegal.",
                "The mosquito was actually [c].",
                "Nino will fall underground and meet [c].",
                "Nino will fall underground and crush [c].",
                "[i] can only be destroyed with [i].",
                "It is a little known fact that [c] watches [a].",
            ];

            var characters = [
                "Nino",
                "Aria",
                "Maya",
                "Jotaro girl",
                "buttgirl",
                "Sis",
                "the human prince",
                "Kotori",
                "Solis",
                "Suvillan",
                "one of the maids",
                "Corona",
                "Ludwig",
                "Nino's mother",
                "Nino's father",
                "the gem seller",
            ];

            var items = [
                "the lantern",
                "Nino's sword",
                "the crate in the dead forest",
                "the yellow flowers",
                "Five's flower crown",
                "Aria's bow",
                "Kotori's spear",
                "Rigmarole of Oshen",
                "Nino's healing hands",
                "Aria's illusions",
                "Corona's chains",
                "Solis' headband",
                "the human prince's hair",
                "Aria's muffins",
                "Aria's tea",
                "the moon",
                "Aria's ass",
                "Suvillan's smile",
                "a maid outfit",
                "the unpleasant/apologetic note",
                "hat guy's seemingly missing horn",
                "Maya's grave",
                "Kotori's horn",
                "Corona's wings",
                "Corona's halo",
            ];
            var locations = [
                "the forest",
                "Redtulip Town",
                "Suvillan's tower",
                "the library",
                "Heavenly Treats",
                "G. E. M.",
                "Reds' Inn",
                "the graveyard",
                "Aria's house",
                "the underground",
            ];
            var animes = [
                "Jojo's Bizarre Adventure",
                "Love Live!",
                "Tokyo Ghoul",
                "Death Note",
                "Mirai Nikki",
                "Fullmetal Alchemist",
                "Pingu in the city",
                "Cory in the house",
                "Little Witch Academia",
                "Boku no Hero Academia",
                "Kill la Kill",
                "Evangelion",
                "Gurren Lagann",
                "Madoka Magica",
                "Sailor Moon",
                "Sword Art Online",
                "Steins;Gate",
                "Eromanga Sensei",
                "Monster Musume",
                "Boku no Pico",
                "Kobayashi-san Chi no Maid Dragon",
                "Bakemonogatari",
                "Youjo Senki",
                "Made in Abyss",
                "Naruto",
            ];

            // stolen from https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array
            function shuffle(array) {
                var currentIndex = array.length, temporaryValue, randomIndex;

                // While there remain elements to shuffle...
                while (0 !== currentIndex) {

                    // Pick a remaining element...
                    randomIndex = Math.floor(Math.random() * currentIndex);
                    currentIndex -= 1;

                    // And swap it with the current element.
                    temporaryValue = array[currentIndex];
                    array[currentIndex] = array[randomIndex];
                    array[randomIndex] = temporaryValue;
                }

                return array;
            }


            function roll_seeded(seed) {
                Math.seedrandom(seed);

                var ts = shuffle(theories.slice());
                var cs = shuffle(characters.slice());
                var iss = shuffle(items.slice());
                var ls = shuffle(locations.slice());
                var ass = shuffle(animes.slice());

                var theory = ts[0];

                var c = theory.split("[c]");
                theory = c[0];
                for (var q = 1; q < c.length; ++q) {
                    theory += cs[q-1] + c[q];
                }

                var i = theory.split("[i]");
                theory = i[0];
                for (var q = 1; q < i.length; ++q) {
                    theory += iss[q-1] + i[q];
                }

                var l = theory.split("[l]");
                theory = l[0];
                for (var q = 1; q < l.length; ++q) {
                    theory += lss[q-1] + l[q];
                }

                var a = theory.split("[a]");
                theory = a[0];
                for (var q = 1; q < a.length; ++q) {
                    theory += ass[q-1] + a[q];
                }

                theory = theory.charAt(0).toUpperCase() + theory.slice(1);
                document.getElementById("theory").textContent = theory;
            }

            function roll() {
                Math.seedrandom();
                var seed = Math.floor(Math.random() * 2147483648.);
                roll_seeded(seed);
                history.pushState(null, null, "#"+seed);
            }

            window.addEventListener("hashchange", function(e) {
                roll_seeded(parseInt(window.location.hash.substr(1)));
            });
        </script>
    </head>
    <body>
        <div id="spacer"></div>
        <div id="container">
            <div id="theory">
            </div>
            <div id="buttons">
                <button id="roll" onclick="roll();">roll</button>
            </div>
        </div>
        <div id="footer">
            <a href="https://github.com/delta-psi/oceanfalls-crack-theory-generator">Oceanfalls crack theory generator</a> by <a href="https://github.com/delta-psi">DeltaPsi</a>
        </div>

        <script>
            if (window.location.hash) {
                roll_seeded(parseInt(window.location.hash.substr(1)));
            } else {
                roll();
            }
        </script>
    </body>
</html>
